package HashMapHeap2;

import java.util.*;

public class meeting_rooms_two {

	 public static int minMeetingRooms(int[][] intervals) {
         // write your code here.
         PriorityQueue<Integer> start = new PriorityQueue<Integer>();
         PriorityQueue<Integer> end = new PriorityQueue<Integer>();
         
         for(int i=0;i<intervals.length;i++)
         {
        	 start.add(intervals[i][0]);
        	 end.add(intervals[i][1]);
         }
         //System.out.println(start.peek()+" "+end.peek());
         
         int i=0,j=0,count = 0,max = 0;
         Iterator<Integer> itr = start.iterator();
         Iterator<Integer> itr2 = end.iterator();
         while(itr.hasNext()&&itr2.hasNext())
         {
        	 intervals[i][0] = itr.next();
        	 intervals[i][1] = itr2.next();
        	 i++;
         }
//         for( i=0;i<intervals.length;i++)
//         {
//        	 System.out.println(intervals[i][0]+" "+intervals[i][1]);
//         }
         i=0;
         while(i<intervals.length)
         {
        	 if(intervals[i][0]<=intervals[j][1])
        	 {
        		 System.out.println(intervals[i][0]+" "+count);
        		 i++;
        		 count++;
        		 
        	 }
        	 else
        	 {
        		 System.out.println(intervals[j][1]+" "+count);
        		 j++;
        		 count--;
        	 }
        	 max = max>count?max:count;
        	 
         }
		 return max;
     }
 
     public static void main(String[] args) {
         Scanner sc = new Scanner(System.in);
 
         // Input for number of meetings.
         int N = sc.nextInt();
 
         int[][] intervals = new int[N][2];
 
         int start, end;
         // Input for intervals.
         for (int i = 0; i < intervals.length; i++) {
 
             start = sc.nextInt();
             end = sc.nextInt();
 
             intervals[i][0] = start;
             intervals[i][1] = end;
         }
 
         int result = minMeetingRooms(intervals);
 
         System.out.println(result);
 
     }
 
     // Function to display a 2D array.
     public static void display(int[][] arr) {
 
         for (int i = 0; i < arr.length; i++) {
             for (int j = 0; j < arr[0].length; j++) {
                 System.out.print(arr[i] + " ");
             }
             System.out.println();
         }
 
         
     }
 
}
